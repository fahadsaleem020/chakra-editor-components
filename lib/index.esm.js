import{Modal as e,ModalOverlay as t,ModalContent as l,ModalHeader as n,ModalCloseButton as r,IconButton as a,ModalBody as o,VStack as c,FormLabel as m,InputGroup as s,Input as i,HStack as u,NumberInput as d,NumberInputField as E,NumberInputStepper as p,NumberIncrementStepper as b,NumberDecrementStepper as g,Text as h,ModalFooter as f,Button as w,Drawer as S,InputRightElement as x,Flex as C,Box as I,Center as v,Spinner as y,useInterval as k,useTheme as P}from"@chakra-ui/react";import{insertYoutubeVideo as A,insertImage as O,removeUrl as V,insertUrl as z,insertVideo as M,insertTable as T}from"@retap/functions";import{useRetap as F}from"@retap/provider";import{MdClose as H,MdCheck as L,MdLinkOff as D}from"react-icons/md";import{useForm as j}from"@retap/hooks";import U,{useState as W}from"react";import{generateJSON as X}from"@tiptap/react";const Y=({editor:S})=>{const{youtube:x}=F(),{handler:C}=j(),I=S.getAttributes("youtube").start||0,v=Math.floor(I%3600/60).toString().padStart(2,"0"),y=Math.floor(I%60).toString().padStart(2,"0");return U.createElement(e,{isOpen:x?.modalProps?.isOpen,onClose:()=>{x.modalProps.onClose()},motionPreset:"none"},U.createElement(t,null),U.createElement(l,null,U.createElement("form",{onSubmit:e=>{const t=C(e);let{mins:l,secs:n,src:r}=t;n=n>60?60:n;let a=60*l+parseInt(n);A({editor:S,src:r,start:a}),x.modalProps.onClose()}},U.createElement(n,null,"Youtube Settings"),U.createElement(r,{as:"div"},U.createElement(a,{"aria-label":"close-youtube-editor",size:"sm",variant:"ghost",onClick:x?.modalProps?.onClose,icon:U.createElement(H,{size:22})})),U.createElement(o,null,U.createElement(c,{alignItems:"start",gap:1},U.createElement(m,null,"Source"),U.createElement(s,null,U.createElement(i,{name:"src",autoFocus:!0,placeholder:"https://www.youtube.com/watch?v=vskj23kkb",defaultValue:S.getAttributes("youtube").src})),U.createElement(u,null,U.createElement(s,null,U.createElement(c,{alignItems:"start"},U.createElement(m,null,"Minutes"),U.createElement(d,{defaultValue:v,min:0,name:"mins"},U.createElement(E,null),U.createElement(p,null,U.createElement(b,null),U.createElement(g,null))))),U.createElement(c,{alignItems:"start",gap:1},U.createElement(m,null,"Seconds"),U.createElement(s,null,U.createElement(d,{defaultValue:y,min:0,max:60,name:"secs"},U.createElement(E,null),U.createElement(p,null,U.createElement(b,null),U.createElement(g,null)))))),U.createElement(h,{textAlign:"left",fontSize:"sm",color:"gray.600"},"Video start timing."))),U.createElement(f,null,U.createElement(w,{colorScheme:"blue",type:"submit"},"Embed Video")))))},q=({children:e,id:t,...l})=>{const{retapDrawer:n}=F(),r=B(n?.disclosureProps,t);return U.createElement(S,{isOpen:r&&r.isOpen,onClose:n?.disclosureProps.onClose,...l},e)},B=(e,t)=>!!e&&{isOpen:e.id===t&&e.isOpen},G=({editor:u})=>{const{image:d}=F(),{handler:E}=j();return U.createElement(e,{isOpen:d?.modalProps?.isOpen,onClose:()=>{d.modalProps.onClose()},motionPreset:"none"},U.createElement(t,null),U.createElement(l,null,U.createElement("form",{onSubmit:e=>{const t=E(e);O({editor:u,...t}),d.modalProps.onClose()}},U.createElement(n,null,"Image Settings"),U.createElement(r,{as:"div"},U.createElement(a,{"aria-label":"close-image-editor",size:"sm",variant:"ghost",onClick:d?.modalProps?.onClose,icon:U.createElement(H,{size:22})})),U.createElement(o,null,U.createElement(c,{gap:1,alignItems:"start"},U.createElement(m,null,"Source"),U.createElement(s,null,U.createElement(i,{name:"src",autoFocus:!0,placeholder:"example.com/image.png",defaultValue:u.getAttributes("image").src})),U.createElement(m,null,"Title"),U.createElement(s,null,U.createElement(i,{name:"title",placeholder:"Donal trump, Adolf hitler, banana",defaultValue:u.getAttributes("image").title})),U.createElement(m,null,"Alternative Text"),U.createElement(s,null,U.createElement(i,{name:"alt",placeholder:"disregard, peaceful, contentful",defaultValue:u.getAttributes("image").alt})))),U.createElement(f,null,U.createElement(w,{colorScheme:"blue",type:"submit",mr:2},"Set Image")))))},J=({editor:e,isVisible:t,SetIsVisible:l})=>{const{handler:n}=j();if(!t)return null;return U.createElement("form",{onSubmit:t=>{const r=n(t);z({editor:e,...r}),l(!1)}},U.createElement(s,{w:"xs"},U.createElement(i,{name:"url",autoFocus:!0,pr:"4.5rem",placeholder:"www.example.com",defaultValue:e.getAttributes("link").href}),U.createElement(x,{width:"5rem"},U.createElement(a,{"aria-label":"link-done",icon:U.createElement(L,{size:17}),size:"sm",mr:"1",type:"submit"}),U.createElement(a,{icon:U.createElement(D,{size:17}),"aria-label":"remove-link",size:"sm",onClick:()=>{l(!1),V({editor:e})},type:"button"}))))},K=({children:t,id:l,...n})=>{const{retapModal:r}=F(),a=N(r?.disclosureProps,l);return U.createElement(e,{isOpen:a&&a.isOpen,onClose:r?.disclosureProps.onClose,...n},t)},N=(e,t)=>!!e&&{isOpen:e.id===t&&e.isOpen},Q=({editor:u})=>{const{video:d}=F(),{handler:E}=j();return U.createElement(e,{isOpen:d?.modalProps?.isOpen,onClose:()=>{d.modalProps.onClose()},motionPreset:"none"},U.createElement(t,null),U.createElement(l,null,U.createElement("form",{onSubmit:e=>{const t=E(e);M({editor:u,...t}),d.modalProps.onClose()}},U.createElement(n,null,"Video Settings"),U.createElement(r,{as:"div"},U.createElement(a,{"aria-label":"close-video-editor",size:"sm",variant:"ghost",onClick:d?.modalProps?.onClose,icon:U.createElement(H,{size:22})})),U.createElement(o,null,U.createElement(c,{gap:1,alignItems:"start"},U.createElement(m,null,"Source"),U.createElement(s,null,U.createElement(i,{name:"src",autoFocus:!0,placeholder:"example.com/video.mp4",defaultValue:u.getAttributes("video").src})),U.createElement(m,null,"Title"),U.createElement(s,null,U.createElement(i,{name:"title",placeholder:"Donal trump, Adolf hitler, banana",defaultValue:u.getAttributes("video").title})))),U.createElement(f,null,U.createElement(w,{colorScheme:"blue",type:"submit",mr:2},"Set Video")))))},R=({table:e,matrix:t,editor:l,withHeader:n,updateTable:r,updateMatrix:a,setWithHeader:o,...c})=>U.createElement("div",null,e.length&&e.flatMap(((e,o)=>U.createElement(Z,{key:o,editor:l,columns:e,rowIndex:o,withHeader:n,updateTable:r,matrix:[t,a],...c})))),Z=({matrix:e,editor:t,columns:l,rowIndex:n,withHeader:r,updateTable:a,...o})=>U.createElement(C,null,l.flatMap(((l,c)=>U.createElement($,{key:c,editor:t,matrix:e,rowIndex:n,cellIndex:c,withHeader:r,attributes:l,updateTable:a,...o})))),$=({attributes:{isActive:e},matrix:t,editor:l,rowIndex:n,cellIndex:r,withHeader:a,updateTable:o,...c})=>{const[{columns:m,rows:s},i]=t;return U.createElement(I,{p:c.padding||c.p||.5,cursor:"pointer",onMouseEnter:()=>{i({columns:1+r,rows:1+n}),o({type:"activate",payload:{cellIndex:r,rowIndex:n}})},onMouseLeave:()=>{i({columns:1+r,rows:1+n}),o({type:"deactivate",payload:{cellIndex:r,rowIndex:n}})},onClick:()=>T({editor:l,rows:s,columns:m,withHeader:a})},U.createElement(I,{w:5,h:5,border:c.border||"1px",borderColor:c.borderColor||"balck",...c,bg:e?c.bg||c.background||c.backgroundColor||"black":"transparent"}))},_=({isOpen:u,onClose:d,editor:E})=>{const{handler:p}=j();return U.createElement(e,{isOpen:u,onClose:d,motionPreset:"none"},U.createElement(t,null),U.createElement(l,null,U.createElement("form",{onSubmit:e=>{const t=p(e);z({editor:E,...t}),d()}},U.createElement(n,null,"Link Settings"),U.createElement(r,{as:"div"},U.createElement(a,{"aria-label":"close-image-editor",size:"sm",variant:"ghost",onClick:d,icon:U.createElement(H,{size:22})})),U.createElement(o,null,U.createElement(c,{gap:1,alignItems:"start"},U.createElement(m,null,"Past or Add url"),U.createElement(s,null,U.createElement(i,{name:"url",autoFocus:!0,placeholder:"www.touchme.com",defaultValue:E.getAttributes("link").href})))),U.createElement(f,null,U.createElement(w,{colorScheme:"blue",type:"submit",mr:2},"Set Url")))))},ee=({spinnerStyles:e,...t})=>U.createElement(v,{h:"full",...t},U.createElement(y,{speed:"600ms",...e})),te=({delay:e=0,children:t,extensions:l})=>{const[n,r]=W();return k((()=>{const e=localStorage.getItem("content");e&&r(X(e,l))}),e),U.createElement(U.Fragment,null,n?.content?.map(((e,l)=>U.createElement(le,{children:t,content:e,key:l}))))},le=({content:e,children:t})=>{const l=e.type,n=e.attrs;return t({type:l,attrs:n,content:e})},ne=({children:e,assetArray:t,isLoading:l=!1,fallback:n="loading...",styles:r})=>{const[a,o]=W("");return l?U.createElement(U.Fragment,null,n):U.createElement(C,{wrap:"wrap",gap:"4",...r},t?.map(((t,l)=>e({src:t,selectedItem:a,setSelectedItem:o,index:l}))))},re=({children:e,selectedItem:t,setSelectedItem:l,...n})=>U.createElement(I,{position:"relative",onMouseEnter:e=>l(e.currentTarget.id),onMouseLeave:()=>l(""),...n},e),ae=({text:e,children:t,buttonContainerProps:l,...n})=>{const r=P().colors;return U.createElement(I,{bottom:"1em",left:"50%",transform:"translateX(-50%)",position:"absolute",...l},t||U.createElement(w,{leftIcon:U.createElement(L,{size:20,color:r.blue[500]}),...n},e||"Insert"))};export{re as AssetBox,ne as AssetGallery,G as ImageModal,ae as InsertButton,J as LinkEditor,_ as LinkModal,ee as Loader,q as RetapDrawer,K as RetapModal,R as TableComponent,Q as VideoModal,te as Watch,Y as YoutubeModal};
//# sourceMappingURL=index.esm.js.map
